# ì• ë‹ˆíŒŒì´ë¸Œ ì „ìê²°ì¬ HTML íŒŒì‹± ë° DB ë§ˆì´ê·¸ë ˆì´ì…˜ í”„ë¡œì íŠ¸

ë‹¤ìš´ë¡œë“œí•œ HTML íŒŒì¼ì„ ê¸°ì¤€ìœ¼ë¡œ í•„ìš”í•œ ì •ë³´ë§Œ í¬ë¡¤ë§í•˜ì—¬ DBì— ì €ì¥í•˜ê³  `.cmds` íŒŒì¼ì„ ìƒì„±í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

---
# ì„¤ì¹˜ ê°€ì´ë“œ

ì´ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ì†Œí”„íŠ¸ì›¨ì–´ ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜ ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“‹ ì„¤ì¹˜ ë°©ë²• (2ê°€ì§€ ì¤‘ ì„ íƒ)

### ë°©ë²• 1: Anaconda ì„¤ì¹˜ 

**Anaconda í•˜ë‚˜ë§Œ ì„¤ì¹˜í•˜ë©´ Python + Jupyter + ê¸°ë³¸ íŒ¨í‚¤ì§€ê°€ ëª¨ë‘ ì„¤ì¹˜ë©ë‹ˆë‹¤.**

**ë‹¤ìš´ë¡œë“œ**: https://www.anaconda.com/download

**ì„¤ì¹˜ í›„ í™•ì¸:**
```bash
python --version
jupyter --version
```

**ì¶”ê°€ íŒ¨í‚¤ì§€ ì„¤ì¹˜:**
```bash
pip install beautifulsoup4 lxml pymysql selenium
```

---

### ë°©ë²• 2: ê°œë³„ ì„¤ì¹˜

#### 1. Python 3.8 ì´ìƒ ì„¤ì¹˜

**ë‹¤ìš´ë¡œë“œ**: https://www.python.org/downloads/

**ì„¤ì¹˜ ì‹œ ì£¼ì˜ì‚¬í•­:**
- âœ… "Add Python to PATH" ë°˜ë“œì‹œ ì²´í¬

**ì„¤ì¹˜ í™•ì¸:**
```bash
python --version
```

#### 2. Jupyter Notebook ì„¤ì¹˜
```bash
pip install jupyter
```

#### 3. í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
pip install beautifulsoup4 lxml pymysql pandas pytz selenium sqlalchemy openpyxl
```

---

## ğŸ“¦ ë‚˜ë¨¸ì§€ í•„ìˆ˜ ì†Œí”„íŠ¸ì›¨ì–´

### MariaDB 

**MariaDB ë‹¤ìš´ë¡œë“œ**: https://mariadb.org/download/

**ì„¤ì¹˜ í›„ DB ìƒì„±:**
```sql
CREATE DATABASE any_approval 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;
```

**ì ‘ì† ì •ë³´ í™•ì¸:**
- Host: `localhost`
- Port: `3306` (ê¸°ë³¸ê°’)
- User: `root` (ê¸°ë³¸ê°’)
- Password: ì„¤ì¹˜ ì‹œ ì„¤ì •í•œ ë¹„ë°€ë²ˆí˜¸

---

### Chrome ë“œë¼ì´ë²„

ìë°” í¬ë¡¤ë§ ì‘ì—…ì— í•„ìš”í•©ë‹ˆë‹¤.

**ì°¸ê³ :** íŒŒì´ì¬ì—ì„œ ChromeDriverëŠ” Seleniumì´ ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë¯€ë¡œ ë³„ë„ ì„¤ì¹˜ ë¶ˆí•„ìš”


---

## ğŸ”§ ì´ˆê¸° ì„¤ì •

### 1. DB ì ‘ì† ì •ë³´ ì„¤ì •

ê° ìŠ¤í¬ë¦½íŠ¸ì˜ ì•„ë˜ ë¶€ë¶„ì„ ì‹¤ì œ í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •:
```python
db_config = {
    'host': 'localhost',
    'user': 'root',              # â† ì—¬ê¸° ìˆ˜ì •
    'password': '1234',          # â† ì—¬ê¸° ìˆ˜ì •
    'database': 'any_approval'
}
```

---

### 2. ì¸ì‚¬ì •ë³´ CSV ì¤€ë¹„

ê° ì—°ë„ í´ë”ì— `ì¸ì‚¬ì •ë³´_ë¶€ì„œì½”ë“œì¶”ê°€.csv` íŒŒì¼ì„ ë°°ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

**CSV íŒŒì¼ í˜•ì‹:**
| ì‚¬ì›ëª… | ID | ë¶€ì„œ | ì‚¬ì›ë²ˆí˜¸ | ì§ìœ„ | ë¶€ì„œì½”ë“œ |
|--------|-----|------|----------|------|----------|
| í™ê¸¸ë™ | hong | ê°œë°œíŒ€ | 001 | ê³¼ì¥ | DEV01 |

---

### 3. íŒŒì¼ ê²½ë¡œ ì„¤ì •

ê° ìŠ¤í¬ë¦½íŠ¸ì—ì„œ `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ì„ ì°¾ì•„ ìˆ˜ì •:
```python
# ì˜ˆì‹œ
base_path = r'C:\Users\LEEJUHWAN\Downloads\2010-01-01~2010-12-31\html'  # â† ì‹¤ì œ ê²½ë¡œë¡œ ìˆ˜ì •
end_year = 2010                                                           # â† ì‘ì—…í•  ì—°ë„ë¡œ ìˆ˜ì •
```

---

## âœ… ì„¤ì¹˜ í™•ì¸

### 1. Python ë° íŒ¨í‚¤ì§€ í™•ì¸
```bash
python --version
pip list
```

### 2. DB ì—°ê²° í…ŒìŠ¤íŠ¸
```python
import pymysql

conn = pymysql.connect(
    host='localhost',
    user='root',
    password='1234',
    database='any_approval'
)
print("âœ… DB ì—°ê²° ì„±ê³µ!")
conn.close()
```

### 3. Jupyter ì‹¤í–‰ í…ŒìŠ¤íŠ¸
```bash
jupyter notebook
```
ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì—´ë¦¬ë©´ ì •ìƒ

---
## ğŸ“Œ ì£¼ìš” ì´ìŠˆ

### ì´ìŠˆ 1: ì´ˆê¸° ë²„ì „ê³¼ ê°œì„  ë²„ì „
- **ë£¨íŠ¸ ê²½ë¡œì˜ íŒŒì´ì¬ íŒŒì¼**: JSON ì €ì¥ ë°©ì‹ (ì´ˆê¸° ë²„ì „)
- **ì—°ë„ë³„ í´ë”ì˜ íŒŒì´ì¬ íŒŒì¼**: DB ì €ì¥ ë°©ì‹ìœ¼ë¡œ ê°œì„ 

### ì´ìŠˆ 2: ê²°ì¬ì„  ë°ì´í„° ì •í™•ë„ ê°œì„ 
- ì´ˆê¸°ì—ëŠ” ê²°ì¬ì˜ê²¬ì—ì„œ ê²°ì¬ì„ ì„ ê°€ì ¸ì™”ìœ¼ë‚˜, ê²°ì¬ì˜ê²¬ê³¼ ê²°ì¬ì„ ì´ í•­ìƒ ì¼ì¹˜í•˜ì§€ ì•ŠìŒì„ ë°œê²¬
- ìˆ«ì ë’¤ì— `_`ê°€ ë¶™ëŠ” íŒŒì¼ëª…ì˜ íŒŒì´ì¬ ì½”ë“œê°€ ì´ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•´ ì¶”ê°€ëœ ì½”ë“œ

### ì´ìŠˆ 3: ì¸ì‚¬ì •ë³´ CSV í•„ìˆ˜
- ëª¨ë“  í´ë” ì•ˆì—ëŠ” ì¸ì‚¬ì •ë³´ CSV íŒŒì¼(ìƒˆë¡œìš´ ì¡°ì§ë„)ì´ ìˆì–´ì•¼ í•¨

### ì´ìŠˆ 4: ì°¸ì¡°ë¬¸ì„œ, ê²°ì¬ì„  í¬ë¡¤ë§ì€ javaë¡œ ì‹¤í–‰í•¨
- ì°¸ì¡°ë¬¸ì„œ ìˆ˜ì§‘ìš© í…Œì´ë¸” (DBì—ì„œ ì‹¤í–‰)
``` 
USE any_approval;
CREATE TABLE reference_documents (
    id INT AUTO_INCREMENT PRIMARY KEY,
    source_document_id VARCHAR(20),
    reference_document_id VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_source (source_document_id),
    INDEX idx_reference (reference_document_id)
);
```
- ê²°ì¬ì„  ìˆ˜ì§‘ìš© í…Œì´ë¸” (ì—°ë„ ë³€ê²½í•˜ê¸° 2025-> ???) (DBì—ì„œ ì‹¤í–‰)
```
create table approval_data_2025
(
    record_id     int          null,
    document_id   varchar(255) null,
    post_title    varchar(512) null,
    sequence      int          null,
    status        varchar(50)  null,
    approval_date varchar(50)  null,
    department    varchar(100) null,
    approver      varchar(100) null
);
```
- ì°¸ì¡°ë¬¸ì„œ ì´ìŠˆ í´ë” ì•ˆì— AnyFiveReferenceDocCrawler.javaì™€ AnyFiveActiviesCrawler.javaë¡œ í¬ë¡¤ë§ì„ í•˜ê³ 
- ì°¸ì¡°ë¬¸ì„œì˜ ê²½ìš°ì—ëŠ” ì°¸ì¡°ë¬¸ì„œ ì´ìŠˆí´ë”ì˜ ì°¸ì¡°ë¬¸ì„œë¥¼DBì— ì ì¬.ipynbë¥¼ ì‹¤í–‰
- ê²°ì¬ì„ ì˜ ê²½ìš°ì—ëŠ” ê°ê°ì˜ ì—°ë„ë³„ í´ë”ì˜ 10_ê²°ì¬ì„ ì‹œê°„DBë²„ì „.ipynbì„ ì‹¤í–‰
---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
any_htmlVer_all/
â”œâ”€â”€ ì°¸ì¡°ë¬¸ì„œ ì´ìŠˆ/
â”‚   â”œâ”€â”€ ìˆ«ìì œëª© íŒŒì´ì¬ì½”ë“œ (cmdsì—ì„œ references ì¡´ì¬í•˜ëŠ” ë¬¸ì„œì˜ sourceId ìˆ«ì ì¶”ì¶œ)
â”‚   â”œâ”€â”€ ì°¸ì¡°ë¬¸ì„œ (AnyFiveReferenceDocCrawler.java) - Java í¬ë¡¤ë§ â†’ DB ì ì¬
â”‚   â”œâ”€â”€ ê²°ì¬ì„  (AnyFiveActiviesCrawler.java) - Java í¬ë¡¤ë§ â†’ DB ì ì¬
â”‚   â””â”€â”€ ì°¸ì¡°ë¬¸ì„œë¥¼ DBì— ì ì¬.ipynb (reference_documents í…Œì´ë¸” â†’ documents í…Œì´ë¸”ì˜ referencesë¡œ ì ìš©)
â”‚
â”œâ”€â”€ ê²°ì¬ì˜ê²¬ ë™ì¼ì¸ë¬¼.ipynb
â”‚   â””â”€â”€ HTML íŒŒì¼ì—ì„œ ê°™ì€ ì‚¬ëŒì´ ì˜ê²¬ì„ ì—¬ëŸ¬ ë²ˆ ë‚¸ ê²½ìš°ì˜ íŒŒì¼ì„ ë³´ì—¬ì£¼ëŠ” ì½”ë“œ
â”‚
â””â”€â”€ YYYY-MM-DD~YYYY-MM-DD/ (ì—°ë„ë³„ í´ë”)
    â”œâ”€â”€ ì¸ì‚¬ì •ë³´_ë¶€ì„œì½”ë“œì¶”ê°€.csv
    â””â”€â”€ ìŠ¤í¬ë¦½íŠ¸ë“¤...
```

---

## ğŸ”„ ì‘ì—… ìˆœì„œ

### 1(htmlConvert).ipynb
HTML íŒŒì¼ì˜ ê¸°ì•ˆì¼, ë³´ì¡´ì—°í•œì„ ë³€í™˜

---

### 2(htmlToJsonDB).ipynb
ì „ìê²°ì¬ HTML íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ JSON íŒŒì¼ + MariaDBì— ì €ì¥

**ì£¼ì˜:** ì´ ì½”ë“œë¡œ ëª¨ë“  í•„ë“œë¥¼ ì±„ìš¸ ìˆ˜ ì—†ìŒ. í¬ë¡¤ë§í•´ì•¼ í•˜ëŠ” í•­ëª©ë“¤ê³¼ ë’¤ì—ì„œ ë³´ê°•í•´ì•¼ í•˜ëŠ” í•­ëª©ë“¤ì´ ìˆìŒ

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (íŒŒì¼ ìœ„ì¹˜, end_year ì„¤ì •, DB ì„¤ì •)

---

### 3(htmlToDocbody_convert).ipynb
HTML íŒŒì¼ì— CSSë¥¼ ì¸ë¼ì¸ ì‚½ì…í•˜ê³  ì••ì¶•í•˜ì—¬ DBì— ì €ì¥

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (íŒŒì¼ ìœ„ì¹˜, end_year ì„¤ì •, DB ì„¤ì •)

---

### 4(isPublic_crawling).ipynb
ì „ìê²°ì¬ ì‹œìŠ¤í…œì—ì„œ "ê³µê°œ" ë¬¸ì„œ ëª©ë¡ì„ í¬ë¡¤ë§í•˜ì—¬ ìˆ˜ì§‘ í›„ DBì— ì €ì¥

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (end_year ì„¤ì •, ì¡°íšŒ ê¸°ê°„, DB ì„¤ì •)

**ì£¼ì˜:** ë‚ ì§œ ì„¤ì •ì€ 5ë…„ ì´í•˜ë¡œ í•´ì•¼ í•¨. ë¯¸ë¦¬ ì„¤ì •í•´ë³´ê³  ê²½ê³ ì°½ ëœ¨ë©´ ìª¼ê°œì„œ ì‹¤í–‰í•˜ê¸°

#### ì‹¤í–‰ í›„ DBì—ì„œ ì•„ë˜ SQL ì‹¤í–‰ (ì˜ˆì‹œ: 2010ë…„, ìˆ«ì ë³€ê²½ í•„ìš”)
```sql
USE any_approval;

-- public í…Œì´ë¸”ì„ documentsì— ì ìš©ì‹œí‚¤ê¸°
UPDATE documents 
SET is_public = 1 
WHERE source_id IN (
    SELECT ë¬¸ì„œID FROM public WHERE end_year = 2010
)
AND end_year = 2010;

-- is_publicì´ 1ì¸ ëª¨ë“  ë¬¸ì„œ ì¡°íšŒ
SELECT source_id, title, is_public, end_year
FROM documents
WHERE is_public = 1
AND end_year = 2010;
```

---

### 5(form_crawling).ipynb
ì „ìê²°ì¬ ì‹œìŠ¤í…œì—ì„œ ë¬¸ì„œ ëª©ë¡(ê·¸ë¦¬ë“œ)ì„ í˜ì´ì§€ë³„ë¡œ í¬ë¡¤ë§. ìƒì„¸ í˜ì´ì§€ ì§„ì… ì—†ì´ ëª©ë¡ë§Œ ìˆ˜ì§‘í•˜ì—¬ DBì— ì €ì¥

**ìš©ë„:** ì–‘ì‹ëª… ì–»ê¸° ìœ„í•œ í¬ë¡¤ë§

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (ê¸°ê°„ ì„¤ì •, DB ì„¤ì •)

#### ì‹¤í–‰ í›„ DBì—ì„œ ì•„ë˜ SQL ì‹¤í–‰ (ì˜ˆì‹œ: 2010ë…„, ìˆ«ì ë³€ê²½ í•„ìš”)
```sql
-- formì„ documents í…Œì´ë¸”ì— ì ìš©

-- ëª‡ ê±´ì´ ì—…ë°ì´íŠ¸ë  ê±´ì§€ í™•ì¸
SELECT COUNT(*) AS ì—…ë°ì´íŠ¸ë _ê°œìˆ˜
FROM documents d
JOIN form f ON d.source_id = f.ë¬¸ì„œID 
WHERE d.end_year = 2010 AND f.end_year = 2010;

-- ì‹¤ì œ ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°
SELECT
    d.source_id,
    d.form_name AS í˜„ì¬ê°’,
    f.ì–‘ì‹ëª… AS ì—…ë°ì´íŠ¸ë ê°’,
    d.end_year
FROM documents d
JOIN form f ON d.source_id = f.ë¬¸ì„œID
WHERE d.end_year = 2010 AND f.end_year = 2010
LIMIT 10;

-- ì—…ë°ì´íŠ¸ ì‹¤í–‰
USE any_approval;
UPDATE documents d
JOIN form f ON d.source_id = f.ë¬¸ì„œID
SET d.form_name = f.ì–‘ì‹ëª…
WHERE d.end_year = 2010 AND f.end_year = 2010;
```

---

### 6(NewUser_insert).ipynb
CSV íŒŒì¼ì˜ ì¸ì‚¬ì •ë³´ë¥¼ ì½ì–´ì„œ DB documents í…Œì´ë¸”ì˜ ì‚¬ì› ì •ë³´ ì—…ë°ì´íŠ¸

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (CSV íŒŒì¼ ê²½ë¡œ ì„¤ì •, DB ì„¤ì •)

---

### 7(ì´ë¯¸ì§€ê²½ë¡œìˆ˜ì • + ë³µì‚¬ë³¸ ë‹¤ìš´).ipynb
documents í…Œì´ë¸”ì˜ doc_bodyì— í¬í•¨ëœ ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ë³€í™˜í•˜ê³  ë‹¤ìš´ë¡œë“œ í´ë”ì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ìƒˆ ìœ„ì¹˜ë¡œ ë³µì‚¬

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (DB ì„¤ì •, end_year, ì´ë¯¸ì§€ ì›ë³¸ ê²½ë¡œ, ë³µì‚¬ë³¸ ê²½ë¡œ, src ì ‘ë‘ì‚¬)

**ì£¼ì˜:** 2010, 2015ë…„ë„ì—ëŠ” ì‹¤í–‰ X
- 2010: ì´ë¯¸ì§€ê°€ ì—†ìŒ
- 2015: ë‹¤ìš´ë¡œë“œ íŒŒì¼ì— ì—†ëŠ”, ìˆ˜ë™ìœ¼ë¡œ ë°›ì€ ì´ë¯¸ì§€ 1ê°œë§Œ ì¡´ì¬

---

### 8(ì²¨ë¶€ê²½ë¡œìˆ˜ì • + ë‹¤ìš´).ipynb
documents í…Œì´ë¸”ì˜ attaches ì»¬ëŸ¼ì— í¬í•¨ëœ ì²¨ë¶€íŒŒì¼ ê²½ë¡œë¥¼ ë³€í™˜í•˜ê³  ì²¨ë¶€íŒŒì¼ì„ ìƒˆ ìœ„ì¹˜ë¡œ ë³µì‚¬

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (DB ì„¤ì •, end_year, ì²¨ë¶€íŒŒì¼ ì›ë³¸ ê²½ë¡œ, ë³µì‚¬ë³¸ ê²½ë¡œ, src ì ‘ë‘ì‚¬)

---

### 9_ê²°ì¬ì„ ê²°ì¬ì˜ê²¬ìˆ˜ì •.ipynb
ê²°ì¬ì„ ì„ HTML íŒŒì¼ì˜ ìƒë‹¨ì—ì„œ ê°€ì ¸ì˜´ & ìƒˆë¡œìš´ ì¡°ì§ë„ ë§¤ì¹­ & ê²°ì¬ì˜ê²¬

**ì£¼ì˜:** 
- ê²°ì¬ì„ ê³¼ ê²°ì¬ì˜ê²¬ì˜ ê°œìˆ˜ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§ìœ¼ë¯€ë¡œ ê²°ì¬ì˜ê²¬ì€ ë’¤ì—ì„œ ë³´ê°•
- ê¸°ì•ˆìì˜ ì‹œê°„ì€ HTMLì— ìˆì§€ë§Œ ê²°ì¬ìë“¤ì˜ ì‹œê°„ì€ ì—†ê¸°ì— 00:00:00ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ë’¤ì—ì„œ ë³´ê°•

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (í´ë” ê²½ë¡œ, end_year, ì¸ì‚¬ì •ë³´ CSV íŒŒì¼, DB ì„¤ì •)

---

### 10_ê²°ì¬ì„ ì‹œê°„DBë²„ì „.ipynb
- í¬ë¡¤ë§í•œ í…Œì´ë¸”ì˜ ì‹œê°„ì„ document í…Œì´ë¸”ì— ì—°ê²°.
- AnyFiveActiviesCrawler.javaë¨¼ì € ì‹¤í–‰í•˜ì—¬ ê²°ì¬ì„  í¬ë¡¤ë§ë¶€í„° í•˜ê³  ì‹¤í–‰.

**ì²˜ë¦¬ ë°©ì‹:**
- í¬ë¡¤ë§ ì˜¤ë¥˜ê°€ ìˆì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ ë‘ í…Œì´ë¸” ê°„ì˜ ì œëª©ì„ ë¹„êµí•˜ì—¬ ë¶ˆì¼ì¹˜ ì‹œ ê±´ë„ˆë›°ê³  ì ì¬ (ë¶ˆì¼ì¹˜ë  ê²½ìš° ë”°ë¡œ íŒŒì¼ ìƒì„±)
- activitiesì—ì„œ typeê³¼ nameì´ ëª¨ë‘ ì¼ì¹˜í•  ê²½ìš° actionDate ì—…ë°ì´íŠ¸

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (DB ì„¤ì •)

---

### 11_ì´ë¦„ì‹œê°„ìœ¼ë¡œ ê²°ì¬ì˜ê²¬ë„£ê¸°DB.ipynb
DB ê²°ì¬ì„ ì˜ ì´ë¦„, ì‹œê°„ê³¼ HTML íŒŒì¼ì˜ ê²°ì¬ì˜ê²¬ ìª½ì˜ ì´ë¦„, ì‹œê°„ì´ ì¼ì¹˜í•˜ë©´ DBì— ê²°ì¬ì˜ê²¬ì„ ë„£ëŠ” ì½”ë“œ

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (í´ë” ê²½ë¡œ, end_year, DB ì„¤ì •)

---

### 12_9(DBì—ì„œ cmdsë¡œ ë³€í™˜).ipynb
DB documents í…Œì´ë¸”ì—ì„œ íŠ¹ì • ì—°ë„ ë¬¸ì„œë¥¼ ì¡°íšŒí•˜ì—¬ addDocument ëª…ë ¹ì–´ í˜•ì‹ì˜ `.cmds` íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (DB ì„¤ì •, end_year, ì¶œë ¥ íŒŒì¼ëª…)

---

### 13_cmds íŒŒì¼ì—ì„œ img íƒœê·¸ë¥¼ ì œê±°í•˜ê³  sourceIdë¥¼ ê¸°ë¡.ipynb
`//office\.anyfive\.com/[^>]+>` ë¶€ë¶„ ì‚­ì œ

**ìˆ˜ì • í•„ìš”:** `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ ë¶€ë¶„ì„ ìƒí™©ì— ë§ê²Œ ë³€ê²½ (íŒŒì¼ ê²½ë¡œ ì„¤ì •)

### ëˆ„ë½ëœ ë¬¸ì„œ í™•ì¸ & ëŒ€ì²˜ 
1) any_htmlVer_all/ìƒˆë¡œìš´í¬ë¡¤ë§/í•´ë‹¹ ê¸°ê°„ ë‚´ì— ìˆëŠ” ë¬¸ì„œ IDë§Œ txtíŒŒì¼ë¡œ ê°€ì ¸ì˜¤ëŠ” íŒŒì´ì¬ì½”ë“œ.ipynb 
2) any_htmlVer_all/ìƒˆë¡œìš´í¬ë¡¤ë§/ëˆ„ë½ëœ ë¬¸ì„œID ì°¾ê¸°.ipynb (DBì™€ ëª©ë¡í¬ë¡¤ë§í•œ ê²°ê³¼ë¥¼ ë¹„êµí•˜ì—¬ ëˆ„ë½ëœê±´ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.)
3) ê¹ƒí—ˆë¸Œ any_crawlingì„ ì°¸ê³ í•˜ì—¬ ëˆ„ë½ëœê±´ë§Œ ì¶”ê°€ì ìœ¼ë¡œ í¬ë¡¤ë§ í›„ cmds ë§Œë“¤ê¸°
4) cmds ìƒì„±í•œ í›„ new_documentsí…Œì´ë¸”ì˜ ì •ë³´ë“¤ì„ documentsë¡œ ì˜®ê¸°ê¸°
```
-- ëˆ„ë½ê±´ ì˜®ê¸°ê¸°
INSERT INTO documents (
    source_id,
    doc_num,
    doc_type,
    title,
    doc_status,
    created_at,
    drafter_name,
    drafter_position,
    drafter_dept,
    drafter_email,
    drafter_dept_code,
    form_name,
    is_public,
    end_year,
    `references`,
    attaches,
    referrers,
    activities,
    doc_body,
    created_date
)
SELECT 
    source_id,
    doc_num,
    doc_type,
    title,
    doc_status,
    created_at,
    drafter_name,
    drafter_position,
    drafter_dept,
    drafter_email,
    drafter_dept_code,
    form_name,
    is_public,
    end_year,
    `references`,
    attaches,
    referrers,
    activities,
    doc_body,
    created_date
FROM new_documents
WHERE source_id IN (
    '2002390',
    '2008214',
    '2008497'
-- ì´ëŸ°ì‹ìœ¼ë¡œ ë¬¸ì„œIDë¥¼ ë„£ìŠµë‹ˆë‹¤.
);
```
### sourceIdë¡œ ì‚­ì œí•˜ëŠ”cmds.ipynb
íŠ¹ì • ê¸°ê°„ì— ìƒì„±ëœ ë¬¸ì„œë“¤ì˜ ì‚­ì œ ëª…ë ¹ì–´ íŒŒì¼(.cmds)ì„ ìƒì„±í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.
- ì‹œì‘ì¼/ì¢…ë£Œì¼ ê¸°ê°„ ë‚´ ìƒì„±ëœ ë¬¸ì„œì˜ `source_id` ì¡°íšŒ
- ì¡°íšŒëœ ë¬¸ì„œë³„ `deleteDocument` ëª…ë ¹ì–´ë¥¼ `.cmds` íŒŒì¼ë¡œ ì¶œë ¥
- ì¶œë ¥ì˜ˆì‹œ
`delete_commands_2020-01-01_to_2020-10-30.cmds` íŒŒì¼ ìƒì„±:
```
deleteDocument {"sourceId":"doc_2009491_03"}
deleteDocument {"sourceId":"doc_2009494_03"}
deleteDocument {"sourceId":"doc_2009495_03"}
```
---

## ğŸ› ï¸ ìˆ˜ë™ìœ¼ë¡œ ìˆ˜ì •í•´ì•¼ í•  ê²ƒë“¤

### 1. ì´ë¯¸ì§€ì˜ ê²½ìš° ì¶”ê°€ë¡œ ìˆ˜ë™ìœ¼ë¡œ ë” ì‚­ì œí•˜ê±°ë‚˜ ê²½ë¡œë¥¼ ë”°ë¡œ ë°”ê¿”ì¤˜ì•¼ í•˜ëŠ” ê²½ìš°ë„ ìˆìŒ
â†’ ê° ì—°ë„ë³„ í´ë” ë‚´ë¶€ì˜ removed_sourceIds ë˜ëŠ” ì´ë¯¸ì§€ ê²½ë¡œ ìˆ˜ì • ëª©ë¡ì— ì €ì¥í•´ë‘ 

### 2. ì¤‘ë³µ `<style>` íƒœê·¸ ì‚­ì œ
`<style>` ë‘ ê°œ ë“¤ì–´ê°€ëŠ” ê²Œ ìˆìŒ
- ë‘ ë²ˆì§¸ ìŠ¤íƒ€ì¼ íƒœê·¸ ì‚­ì œ (2016ë…„ë„ ì´ˆì¯¤ê¹Œì§€ `<STYLE>`ë¡œ HTML íŒŒì¼ì— íƒœê·¸ê°€ ë“¤ì–´ê°€ ìˆìŒ)

### 3. CSS ì„ íƒì ì‚­ì œ
CSSì—ì„œ `html, body` ì„ íƒì ì‚­ì œí•˜ê¸°

### 4. Notepad++ ì •ê·œì‹ ì‘ì—…

**ì²¨ë¶€íŒŒì¼ ê²½ë¡œ, ì´ë¯¸ì§€ ê²½ë¡œ**
- ì²¨ë¶€íŒŒì¼ì˜ ê²½ìš° ëª¨ë‘ ì¶”ê°€í•´ì•¼í•˜ì§€ë§Œ, ì´ë¯¸ì§€ì˜ ê²½ìš° ë‹¤ë¥¸ ì—°ë„ëŠ” `7(ì´ë¯¸ì§€ê²½ë¡œìˆ˜ì •~)`ì— ê²½ë¡œë¥¼ ì¶”ê°€í•˜ëŠ” ì½”ë“œê°€ ìˆì–´ì„œ 2025ë…„ë§Œ ë”°ë¡œ ì¶”ê°€í•´ì£¼ê¸°
- ê²½ë¡œ ë§¨ ì•ì— `/PMS_SITE-U7OI43JLDSMO/approval/` ë¶™ì´ê¸°

**doc_ _ìˆ«ì ë¶™ì´ê¸°**
- íŒ¨í„´: `("sourceId":\s*")(\d+)(")`
- ì¹˜í™˜: `\1doc_\2_ìˆ«ì\3`

---

## ğŸ’¡ ì°¸ê³ ì‚¬í•­

- ê° ìŠ¤í¬ë¦½íŠ¸ ë‚´ë¶€ì˜ `#ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”` ì£¼ì„ì„ í™•ì¸í•˜ì—¬ í™˜ê²½ì— ë§ê²Œ ì„¤ì • ë³€ê²½
- ì—°ë„ë³„ë¡œ ì‘ì—… ì‹œ `end_year` ê°’ì„ ì¼ê´€ë˜ê²Œ ë³€ê²½ ( htmlë‹¤ìš´ë¡œë“œ í´ë” ë‹¨ìœ„ ê¸°ì¤€ìœ¼ë¡œ ì§„í–‰í•¨. ex) 2011-01-01~2015-12-31 -> end_year 2015ë¡œ ì„¤ì •)
- SQL ì‹¤í–‰ ì‹œ ì—°ë„ ì¡°ê±´(`WHERE end_year = YYYY`) ë°˜ë“œì‹œ í™•ì¸
